import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns
from collections import Counter

#Load the dataset
df = pd.read_csv("XX50235metadata")
print(df.head())

#Convert to DataFrame
data = [line.split(',') for line in data.split('\n')]
df = pd.DataFrame(data[1:], columns=data[0])
df['Year'] = df['Year'].astype(int)  
#Convert Year to integer

#Country Distribution
plt.figure(figsize=(10, 5))
sns.countplot(x='Country', data=df, order=df['Country'].value_counts().index)
plt.xticks(rotation=45)
plt.title('Sample Distribution by Country')
plt.show()

#Year-wise Distribution
plt.figure(figsize=(6, 4))
sns.countplot(x='Year', data=df)
plt.title('Samples Collected Each Year')
plt.show()

#Stx Gene Frequency
all_genes = ' '.join(df['Stx']).replace('-', '').split()
gene_counts = Counter(all_genes)
plt.figure(figsize=(8, 5))
sns.barplot(x=list(gene_counts.keys()), y=list(gene_counts.values()))
plt.title('Frequency of Stx Genes')
plt.show()

#PT Type Distribution
plt.figure(figsize=(10, 5))
sns.countplot(y='PT', data=df, order=df['PT'].value_counts().index)
plt.title('PT Type Distribution')
plt.show()

#Regional Distribution
plt.figure(figsize=(8, 8))
df['Region'].value_counts().plot(kind='pie', autopct='%1.1f%%')
plt.title('Sample Distribution by Region')
plt.ylabel('')
plt.show()
